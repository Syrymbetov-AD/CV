// Translation data
const translations = {
    "ru": {
        "name": "Амир Сырымбетов",
        "title": "DevOps/Cloud Engineer",
        "quote": "\"Стремлюсь создавать решения, закладывающие фундамент для будущих инноваций.\"",
        "city": "Астана, Казахстан",
        "about_title": "О себе",
        "about_text": "Динамичный DevOps/Cloud инженер, президент клуба AWS, опыт автоматизации и управления IT-командами, преподавание, event-management.",
        "hard_skills_title": "Технические навыки",
        "soft_skills_title": "Личные навыки",
        "experience_title": "Опыт работы",
        "education_title": "Образование",
        "certificates_title": "Сертификаты",
        "languages_title": "Языки",
        "competencies_title": "Ключевые компетенции",
        "contact_title": "Свяжитесь со мной",
        "social_title": "Социальные сети",
        "certificates_short": "Сертификаты",
        "copyright": "Все права защищены",
        "work_experience": [
            {
                "role": "Junior DevOps/Cloud Engineer",
                "company": "qCloudy",
                "date": "апрель 2025 - настоящее время",
                "tasks": [
                    "AWS инфраструктура: EC2, IAM, RDS, Lambda, CloudWatch, SNS, EKS, VPC",
                    "Pulumi на TypeScript",
                    "Kubernetes, Karpenter для автомасштабирования",
                    "Monitoring: Loki, Promtail, Alarms, Slack интеграция",
                    "GitLab CI/CD, автоматизация production/staging",
                    "Инфраструктурная безопасность (IAM политики, MFA)"
                ]
            },
            {
                "role": "Преподаватель Frontend и Python",
                "company": "CapEdu",
                "date": "март 2024 - февраль 2025",
                "tasks": [
                    "Преподавание Python и Web Development",
                    "Создание курса по ИКТ и видеоуроков",
                    "Работа с различными группами студентов"
                ]
            }
        ],
        "education": [
            {
                "title": "Astana IT University, Software Engineering",
                "date": "сентябрь 2023 - июнь 2026",
                "gpa": "GPA: 3.3/4.0",
                "details": ["Президент клуба AWS 3C, организация обучающих мероприятий и партнерства с AWS"]
            },
            {
                "title": "Школа-гимназия №75, Астана",
                "date": "сентябрь 2012 - май 2023",
                "details": ["Президент школы, event-менеджмент, лидерство"]
            }
        ],
        "certificates": [
            "AWS Certified Cloud Practitioner",
            "Google Cloud Computing Foundations Certificate",
            "Cisco CyberSecurity Essentials",
            "PCAP Programming Essentials in Python"
        ],
        "hard_skills": [
            "AWS (EC2, IAM, RDS, Lambda, CloudWatch, SNS, VPC, EKS)",
            "Pulumi (TypeScript)",
            "Kubernetes, Docker, Helm, Karpenter",
            "GitLab CI/CD",
            "Python, Java, TypeScript, JavaScript, C++",
            "Monitoring (Loki, Promtail, Grafana, Prometheus)",
            "Linux, Bash, автоматизация"
        ],
        "soft_skills": [
            "Лидерство",
            "Коммуникация",
            "Event-менеджмент",
            "Обучение и менторство",
            "Планирование и организация",
            "Адаптируемость",
            "Креативность"
        ],
        "languages_list": [
            {"name": "Казахский", "level": "Родной"},
            {"name": "Русский", "level": "C2"},
            {"name": "Английский", "level": "C1"}
        ],
        "competencies": {
            "technical": [
                "Масштабируемая облачная инфраструктура, автоматизация развертывания",
                "Безопасность, оптимизация затрат, наблюдаемость"
            ],
            "leadership": [
                "Вдохновление и организация команд, публичные выступления",
                "Event-менеджмент, партнерство с AWS"
            ],
            "personal": [
                "Быстрое обучение, внимание к деталям, командная работа",
                "Проактивные инновации"
            ]
        },
        "competencies_titles": {
            "technical": "Технические",
            "leadership": "Лидерские",
            "personal": "Личностные"
        }
    },
    "en": {
        "name": "Amir Syrymbetov",
        "title": "DevOps/Cloud Engineer",
        "quote": "\"Committed to building solutions that lay the foundation for future innovation.\"",
        "city": "Astana, Kazakhstan",
        "about_title": "About Me",
        "about_text": "Dynamic DevOps/Cloud Engineer, AWS club president, experience in automation, IT team management, teaching, and event management.",
        "hard_skills_title": "Technical Skills",
        "soft_skills_title": "Personal Skills",
        "experience_title": "Work Experience",
        "education_title": "Education",
        "certificates_title": "Certificates",
        "languages_title": "Languages",
        "competencies_title": "Key Competencies",
        "contact_title": "Contact Me",
        "social_title": "Social Networks",
        "certificates_short": "Certificates",
        "copyright": "All rights reserved",
        "work_experience": [
            {
                "role": "Junior DevOps/Cloud Engineer",
                "company": "qCloudy",
                "date": "April 2025 - Present",
                "tasks": [
                    "AWS infrastructure: EC2, IAM, RDS, Lambda, CloudWatch, SNS, EKS, VPC",
                    "Pulumi with TypeScript",
                    "Kubernetes, Karpenter for autoscaling",
                    "Monitoring: Loki, Promtail, Alarms, Slack integration",
                    "GitLab CI/CD, automation of production/staging",
                    "Infrastructure security (IAM policies, MFA)"
                ]
            },
            {
                "role": "Frontend & Python Instructor",
                "company": "CapEdu",
                "date": "March 2024 - February 2025",
                "tasks": [
                    "Teaching Python and Web Development",
                    "Developed ICT course and video lessons",
                    "Worked with diverse student groups"
                ]
            }
        ],
        "education": [
            {
                "title": "Astana IT University, Software Engineering",
                "date": "September 2023 - June 2026",
                "gpa": "GPA: 3.3/4.0",
                "details": ["President of AWS 3C club, organized workshops and AWS partnerships"]
            },
            {
                "title": "School-gymnasium No.75, Astana",
                "date": "September 2012 - May 2023",
                "details": ["School president, event management, leadership"]
            }
        ],
        "certificates": [
            "AWS Certified Cloud Practitioner",
            "Google Cloud Computing Foundations Certificate",
            "Cisco CyberSecurity Essentials",
            "PCAP Programming Essentials in Python"
        ],
        "hard_skills": [
            "AWS (EC2, IAM, RDS, Lambda, CloudWatch, SNS, VPC, EKS)",
            "Pulumi (TypeScript)",
            "Kubernetes, Docker, Helm, Karpenter",
            "GitLab CI/CD",
            "Python, Java, TypeScript, JavaScript, C++",
            "Monitoring (Loki, Promtail, Grafana, Prometheus)",
            "Linux, Bash, automation"
        ],
        "soft_skills": [
            "Leadership",
            "Communication",
            "Event Management",
            "Teaching & Mentoring",
            "Planning & Organization",
            "Adaptability",
            "Creativity"
        ],
        "languages_list": [
            {"name": "Kazakh", "level": "Native"},
            {"name": "Russian", "level": "C2"},
            {"name": "English", "level": "C1"}
        ],
        "competencies": {
            "technical": [
                "Scalable cloud infrastructure, deployment automation",
                "Security, cost optimization, observability"
            ],
            "leadership": [
                "Inspiring and organizing teams, public speaking",
                "Event management, AWS partnership"
            ],
            "personal": [
                "Fast learning, attention to detail, teamwork",
                "Proactive innovation"
            ]
        },
        "competencies_titles": {
            "technical": "Technical",
            "leadership": "Leadership",
            "personal": "Personal"
        }
    }
};

let currentLanguage = 'ru';

// Wait for DOM to load
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguageSwitcher();
    populateContent();
    initializeAnimations();
    initializeScrollAnimations();
    initializeSmoothScrolling();
});

// Initialize language switcher
function initializeLanguageSwitcher() {
    const langButtons = document.querySelectorAll('.lang-btn');
    
    // Set initial active state
    document.querySelector('.lang-btn[data-lang="ru"]').classList.add('active');
    
    langButtons.forEach(button => {
        button.addEventListener('click', function() {
            const newLang = this.getAttribute('data-lang');
            
            if (newLang !== currentLanguage) {
                // Remove active class from all buttons
                langButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Switch language
                switchLanguage(newLang);
            }
        });
    });
}

// Switch language function
function switchLanguage(lang) {
    currentLanguage = lang;
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Update title
    document.title = translations[lang].name;
    
    // Update all elements with data-translate attribute
    const translateElements = document.querySelectorAll('[data-translate]');
    translateElements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Repopulate dynamic content
    populateContent();
}

// Populate dynamic content
function populateContent() {
    const lang = translations[currentLanguage];
    
    populateSkills();
    populateCompetencies();
    populateExperience();
    populateEducation();
    populateLanguages();
    populateCertificates();
}

// Populate skills
function populateSkills() {
    const lang = translations[currentLanguage];
    
    // Hard skills
    const hardSkillsList = document.getElementById('hard-skills-list');
    hardSkillsList.innerHTML = '';
    
    lang.hard_skills.forEach(skill => {
        const skillItem = document.createElement('div');
        skillItem.className = 'skill-item';
        skillItem.innerHTML = `<span class="skill-name">${skill}</span>`;
        hardSkillsList.appendChild(skillItem);
    });
    
    // Soft skills
    const softSkillsList = document.getElementById('soft-skills-list');
    softSkillsList.innerHTML = '';
    
    lang.soft_skills.forEach(skill => {
        const skillItem = document.createElement('div');
        skillItem.className = 'skill-item';
        skillItem.innerHTML = `<span class="skill-name">${skill}</span>`;
        softSkillsList.appendChild(skillItem);
    });
}

// Populate competencies
function populateCompetencies() {
    const lang = translations[currentLanguage];
    const competenciesGrid = document.getElementById('competencies-grid');
    competenciesGrid.innerHTML = '';
    
    const categories = ['technical', 'leadership', 'personal'];
    const icons = ['fas fa-cogs', 'fas fa-users', 'fas fa-lightbulb'];
    
    categories.forEach((category, index) => {
        const categoryDiv = document.createElement('div');
        categoryDiv.className = 'competency-category';
        
        const title = lang.competencies_titles[category];
        const items = lang.competencies[category];
        
        categoryDiv.innerHTML = `
            <h4><i class="${icons[index]}"></i> ${title}</h4>
            <ul>
                ${items.map(item => `<li>${item}</li>`).join('')}
            </ul>
        `;
        
        competenciesGrid.appendChild(categoryDiv);
    });
}

// Populate experience
function populateExperience() {
    const lang = translations[currentLanguage];
    const experienceList = document.getElementById('experience-list');
    experienceList.innerHTML = '';
    
    lang.work_experience.forEach(exp => {
        const expItem = document.createElement('div');
        expItem.className = 'experience-item';
        
        expItem.innerHTML = `
            <div class="experience-header">
                <h4>${exp.role}</h4>
                <span class="company">${exp.company}</span>
                <span class="date">${exp.date}</span>
            </div>
            <ul class="experience-tasks">
                ${exp.tasks.map(task => `<li>${task}</li>`).join('')}
            </ul>
        `;
        
        experienceList.appendChild(expItem);
    });
}

// Populate education
function populateEducation() {
    const lang = translations[currentLanguage];
    const educationList = document.getElementById('education-list');
    educationList.innerHTML = '';
    
    lang.education.forEach(edu => {
        const eduItem = document.createElement('div');
        eduItem.className = 'education-item';
        
        eduItem.innerHTML = `
            <h4>${edu.title}</h4>
            <span class="date">${edu.date}</span>
            ${edu.gpa ? `<p class="gpa">${edu.gpa}</p>` : ''}
            ${edu.details.map(detail => `<p>${detail}</p>`).join('')}
        `;
        
        educationList.appendChild(eduItem);
    });
}

// Populate languages
function populateLanguages() {
    const lang = translations[currentLanguage];
    const languagesList = document.getElementById('languages-list');
    languagesList.innerHTML = '';
    
    lang.languages_list.forEach(language => {
        const langItem = document.createElement('div');
        langItem.className = 'language-item';
        
        langItem.innerHTML = `
            <span class="language-name">${language.name}</span>
            <span class="language-level">${language.level}</span>
        `;
        
        languagesList.appendChild(langItem);
    });
}

// Populate certificates
function populateCertificates() {
    const lang = translations[currentLanguage];
    const certificatesGrid = document.getElementById('certificates-grid');
    certificatesGrid.innerHTML = '';
    
    const icons = ['fab fa-aws', 'fab fa-google', 'fas fa-shield-alt', 'fab fa-python'];
    
    lang.certificates.forEach((cert, index) => {
        const certItem = document.createElement('div');
        certItem.className = 'certificate-item';
        
        certItem.innerHTML = `
            <i class="${icons[index]}"></i>
            <span>${cert}</span>
        `;
        
        certificatesGrid.appendChild(certItem);
    });
}

// Initialize fade-in animations for sections
function initializeAnimations() {
    const animatedElements = document.querySelectorAll('.card, .hero-content');
    
    // Add fade-in class to all animated elements
    animatedElements.forEach((element, index) => {
        element.classList.add('fade-in');
        // Stagger the animations
        setTimeout(() => {
            element.classList.add('visible');
        }, index * 200);
    });
}

// Initialize scroll animations for sections
function initializeScrollAnimations() {
    const sections = document.querySelectorAll('section');
    
    const sectionObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                
                // Add special animations for different sections
                if (entry.target.classList.contains('skills-section')) {
                    animateSkillCards(entry.target);
                } else if (entry.target.classList.contains('certificates-section')) {
                    animateCertificates(entry.target);
                } else if (entry.target.classList.contains('experience-section')) {
                    animateExperience(entry.target);
                }
            }
        });
    }, {
        threshold: 0.2,
        rootMargin: '0px 0px -50px 0px'
    });
    
    sections.forEach(section => {
        sectionObserver.observe(section);
    });
}

// Animate skill cards with stagger effect
function animateSkillCards(section) {
    const skillItems = section.querySelectorAll('.skill-item');
    
    skillItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateX(-30px)';
        item.style.transition = 'all 0.6s ease-out';
        
        setTimeout(() => {
            item.style.opacity = '1';
            item.style.transform = 'translateX(0)';
        }, index * 100);
    });
}

// Animate certificates with bounce effect
function animateCertificates(section) {
    const certificates = section.querySelectorAll('.certificate-item');
    
    certificates.forEach((cert, index) => {
        cert.style.opacity = '0';
        cert.style.transform = 'scale(0.8) translateY(20px)';
        cert.style.transition = 'all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
        
        setTimeout(() => {
            cert.style.opacity = '1';
            cert.style.transform = 'scale(1) translateY(0)';
        }, index * 150);
    });
}

// Animate experience items
function animateExperience(section) {
    const experienceItems = section.querySelectorAll('.experience-item');
    
    experienceItems.forEach((item, index) => {
        item.style.opacity = '0';
        item.style.transform = 'translateY(30px)';
        item.style.transition = 'all 0.7s ease-out';
        
        setTimeout(() => {
            item.style.opacity = '1';
            item.style.transform = 'translateY(0)';
        }, index * 200);
    });
}

// Initialize smooth scrolling for anchor links
function initializeSmoothScrolling() {
    const links = document.querySelectorAll('a[href^="#"]');
    
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            const targetSection = document.querySelector(targetId);
            
            if (targetSection) {
                targetSection.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
}

// Add hover effects for interactive elements
document.addEventListener('DOMContentLoaded', function() {
    // Add hover effects to cards
    const cards = document.querySelectorAll('.card');
    
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.transition = 'transform 0.3s ease-out';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
    
    // Add pulse effect to social links
    const socialLinks = document.querySelectorAll('.social-link');
    
    socialLinks.forEach(link => {
        link.addEventListener('mouseenter', function() {
            this.style.animation = 'pulse 0.6s ease-in-out';
        });
        
        link.addEventListener('animationend', function() {
            this.style.animation = '';
        });
    });
});

// Add CSS for pulse animation
const style = document.createElement('style');
style.textContent = `
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }
    
    .skill-item:hover {
        transform: translateX(5px);
        transition: transform 0.3s ease-out;
    }
    
    .certificate-item:hover {
        border-color: var(--color-primary);
    }
    
    .competency-category:hover {
        transform: translateY(-3px);
        transition: transform 0.3s ease-out;
        box-shadow: var(--shadow-md);
    }
    
    .experience-item:hover {
        border-color: var(--color-primary);
        box-shadow: var(--shadow-md);
    }
    
    .education-item:hover,
    .language-item:hover {
        transform: translateX(5px);
        transition: transform 0.3s ease-out;
    }
    
    .lang-btn:focus {
        outline: none;
        box-shadow: var(--focus-ring);
    }
`;
document.head.appendChild(style);

// Add typing effect to hero quote
function addTypingEffect() {
    const quote = document.querySelector('.hero-quote');
    const text = quote.textContent;
    
    quote.textContent = '';
    quote.style.borderRight = '2px solid var(--color-primary)';
    
    let index = 0;
    
    function typeWriter() {
        if (index < text.length) {
            quote.textContent += text.charAt(index);
            index++;
            setTimeout(typeWriter, 50);
        } else {
            // Remove cursor after typing is complete
            setTimeout(() => {
                quote.style.borderRight = 'none';
            }, 1000);
        }
    }
    
    // Start typing effect after a delay
    setTimeout(typeWriter, 1500);
}

// Initialize typing effect
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(addTypingEffect, 2000);
});

// Add loading animation
function showLoadingAnimation() {
    const body = document.body;
    body.style.opacity = '0';
    body.style.transition = 'opacity 0.5s ease-in-out';
    
    window.addEventListener('load', function() {
        setTimeout(() => {
            body.style.opacity = '1';
        }, 100);
    });
}

// Initialize loading animation
document.addEventListener('DOMContentLoaded', showLoadingAnimation);

// Add resize handler for responsive adjustments
function handleResize() {
    let resizeTimer;
    
    window.addEventListener('resize', function() {
        clearTimeout(resizeTimer);
        
        resizeTimer = setTimeout(function() {
            // Repopulate content if needed for responsive adjustments
            populateContent();
        }, 250);
    });
}

// Initialize resize handler
document.addEventListener('DOMContentLoaded', handleResize);